(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/baloon.5138af4b.jpeg"},20:function(e,t,a){e.exports=a.p+"static/media/commercialAirplane.7c770f8c.jpg"},21:function(e,t,a){e.exports=a.p+"static/media/commercialAirplane1.3ac6ac98.jpg"},22:function(e,t,a){e.exports=a.p+"static/media/commercialAirplane2.b36362c2.jpg"},23:function(e,t,a){var n={"./Wheather.jpg":54,"./baloon.jpeg":19,"./commercialAirplane.jpg":20,"./commercialAirplane1.jpg":21,"./commercialAirplane2.jpg":22};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=23},26:function(e,t,a){e.exports=a(55)},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){e.exports=a.p+"static/media/Wheather.cc00747c.jpg"},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),s=a.n(i),o=a(25),l=a(2),c=a(3),m=a(5),u=a(4),h=a(7),d=a(6),p=a(9),g=a.n(p),f=a(8),E=a.n(f),b=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={originPlace:"",destinationPlace:"",inboundDate:(new Date).toLocaleDateString(),outboundDate:(new Date).toLocaleDateString(),cabinClass:"economy",adults:"1",country:"RO",currency:"EUR",locale:"en-US"},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=window.innerWidth;return r.a.createElement("div",{className:"flightFormContainer"},r.a.createElement("form",{className:"flightForm",onSubmit:this.props.handleSubmit},r.a.createElement("div",{className:"formRow"},r.a.createElement("div",{className:"dropDown"},e>480?r.a.createElement("h3",null,"Flying from: "):r.a.createElement("h3",null,"From:"),r.a.createElement("select",{className:"dropDownSelect",name:"originPlace",required:!0,value:this.props.originPlace,onChange:this.props.handleChange},r.a.createElement("option",{className:"city",value:"Bucuresti"},"Bucuresti"),r.a.createElement("option",{className:"city",value:"Cluj Napoca"},"Cluj Napoca"),r.a.createElement("option",{className:"city",value:"Constanta"},"Constanta"),r.a.createElement("option",{className:"city",value:"Timisoara"},"Timisoara"))),r.a.createElement("div",{className:"textInput"},e>480?r.a.createElement("h3",null,"flying to: "):r.a.createElement("h3",null,"to:"),r.a.createElement("input",{className:"inputText",type:"text",name:"destinationPlace",placeholder:"Bucuresti",required:!0,value:this.props.destinationPlace,onChange:this.props.handleChange}))),r.a.createElement("div",{className:"formRow "},e>480?r.a.createElement("h3",null,"Departure date: "):r.a.createElement("h4",null,"Departure:"),r.a.createElement("input",{className:"textInput dateBox",type:"date",name:"outboundDate",required:!0,value:this.props.outboundDate,onChange:this.props.handleChange}),e>480?r.a.createElement("h3",null,"return date: "):r.a.createElement("h4",null,"return:"),r.a.createElement("input",{className:"textInput dateBox",type:"date",name:"inboundDate",required:!0,value:this.props.intboundDate,onChange:this.props.handleChange})),r.a.createElement("div",{className:"formRow lastRow"},r.a.createElement("div",{className:"dropDown"},e>480?r.a.createElement("h3",null,"Cabin Class: "):r.a.createElement("h4",null,"Class:"),r.a.createElement("select",{className:"dropDownSelect",type:"text",name:"cabinClass",value:this.props.cabinClass,onChange:this.props.handleChange},r.a.createElement("option",{value:"economy"}," Economy "),r.a.createElement("option",{value:"business"}," Business "),r.a.createElement("option",{value:"first"}," First "))),r.a.createElement("div",{className:"dropDown"},e>480?r.a.createElement("h3",null,"Passenger Count: "):r.a.createElement("h4",null,"Passenger:"),r.a.createElement("select",{className:"dropDownSelect",type:"text",name:"adults",value:this.props.adults,onChange:this.props.handleChange},r.a.createElement("option",{value:"1"}," 1 "),r.a.createElement("option",{value:"2"}," 2 "),r.a.createElement("option",{value:"3"}," 3 "),r.a.createElement("option",{value:"4"}," 4 ")))),r.a.createElement("div",{className:"subButton"},r.a.createElement("button",{className:"myButton",type:"submit"},"Search"))))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={items:[],flightsParams:{},flightsData:{},itineraries:[],sortPrice:[],origin:"",destination:"",outboundDate:"",inboundDate:"",price:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.price.map((function(t){return r.a.createElement("div",{key:(t.Price*Math.random()).toString(),className:"flightCardContainer"},r.a.createElement("div",{className:"flightCardRoute"},r.a.createElement("h2",null," ",e.props.flightsParams.origin),r.a.createElement("h4",{className:"arrow"},r.a.createElement("svg",{width:"100px",height:"20px",viewBox:"0 0 100 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none"},r.a.createElement("g",{transform:"translate(5.000000, 5.000000)"},r.a.createElement("path",{d:"M0.5,5 L79,5",stroke:"#666666",strokeWidth:"2",strokeLinecap:"square"}),r.a.createElement("polygon",{fill:"#666666",transform:"translate(85.000000, 5.000000) rotate(90.000000) translate(-85.000000, -5.000000) ",points:"85 0 90 10 80 10"})),r.a.createElement("circle",{stroke:"#666666",strokeWidth:"2",fill:"#FFFFFF",cx:"50",cy:"10",r:"3"})))),r.a.createElement("h2",null,e.props.flightsParams.destination)),r.a.createElement("div",{className:"flightCardGetPrice"},r.a.createElement("div",{className:"flightCardDateContainer"},r.a.createElement("h2",{className:"flightCardDateH noMarginTopTag"},r.a.createElement("span",{className:"flightCardDate"},"Departure: "),v(e.props.flightsParams.outboundDate),r.a.createElement("br",null),r.a.createElement("span",{className:"flightCardDate"},"return: "),v(e.props.flightsParams.inboundDate))),r.a.createElement("div",{className:"priceContainer"},r.a.createElement("h2",{className:"priceStyle noMarginTopTag"},"Price: ",t.Price+"  \u20ac",r.a.createElement("a",{className:"anchorBtn",target:"_blank",rel:"noopener noreferrer",href:"".concat(t.DeeplinkUrl)},"Buy")))))})))}}]),t}(n.Component),v=function(e){return E()(e).format("dddd L")},y=N,C=(a(49),a(50),a(51),a(52),a(53),a(19),a(20),a(21),a(22),["commercialAirplane1.jpg","baloon.jpeg","commercialAirplane.jpg","commercialAirplane2.jpg"]),w=0,D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(o.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault(),a.setState({loading:!0});var t=a.state,n=t.originPlace,r=t.destinationPlace,i=t.inboundDate,s=t.outboundDate,o=t.adults,l=t.currency,c=t.locale,m=t.country,u=t.cabinClass;g.a.post("https://flightsearchnodejs.cristisita.now.sh/items",{originPlace:n,destinationPlace:r,inboundDate:i,outboundDate:s,adults:o,currency:l,locale:c,country:m,cabinClass:u}).then((function(e){setTimeout((function(){return a.loadItems()}),14e3)})).catch((function(e){return console.log(e)}))},a.loadItems=function(){return g.a.get("https://flightsearchnodejs.cristisita.now.sh/items").then((function(e){if(null===e.data[0].wheatherorigin||"undefined"===typeof e.data[0].wheatherorigin)return console.log(e),a.setState({loadingPlus:!0}),12===++w?g.a.delete("https://flightsearchnodejs.cristisita.now.sh/items/id").then((function(e){w=0,console.log(e,"delete"),alert("Something is wrong! Check if the destination is correct, if so, try again later!"),setTimeout((function(){return a.loadItems()}),1e3)})):setTimeout((function(){return a.loadItems()}),4e3);a.setState({loading:!1}),a.setState({loadingPlus:!1}),a.setState({items:e.data}),a.setState({cities:P(e.data)}),a.setState({wheatherorigin:[S(e.data[0].outboundDate,JSON.parse(e.data[0].wheatherorigin).wheathOrigin.list)]}),a.setState({wheatherdestination:[S(e.data[0].outboundDate,JSON.parse(e.data[0].wheatherdestination).wheathDestination.list)]}),a.setState({flightsParams:a.state.items[0]}),a.setState({flightsData:JSON.parse(a.state.flightsParams.flightsData)}),a.setState({itineraries:a.state.flightsData.responseFlightsData.Itineraries}),a.setState({price:j(a.state.itineraries)}),a.setState({sortPrice:a.state.price.sort((function(e,t){return Number(e.Price)-Number(t.Price)}))}),console.log(S(e.data[0].outboundDate,JSON.parse(e.data[0].wheatherorigin).wheathOrigin.list),a.state.wheatherorigin)})).catch((function(e){return console.log(e)}))},a.state={items:[],flightsParams:{},flightsData:{},itineraries:[],sortPrice:[],origin:"",destination:"",outboundDate:"",inboundDate:"",price:[],originPlace:"Cluj Napoca",destinationPlace:"",cities:[],wheatherorigin:[],wheatherdestination:[],cabinClass:"economy",adults:"1",country:"RO",currency:"EUR",locale:"en-US",slide:C,loading:!1,loadingPlus:!1},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"mainContainer"},k(this.state),r.a.createElement("header",{className:"appHeader"},r.a.createElement("h1",{className:"pageTitle"},"Flights search engine"),r.a.createElement("p",{className:"powered"},"Powered by Skyscanner")),r.a.createElement("main",{className:"mainContent"},r.a.createElement("div",{className:"sideContainers historyOfSearch"},r.a.createElement("div",{className:"sideImage airplaneImage"}),r.a.createElement("h3",{className:"historyTitle"},"The latest flight searches:",r.a.createElement("br",null),r.a.createElement("span",{style:{marginTop:0,fontSize:"0.6em"}},"(results are from MySQL database)")),this.state.items.map((function(e){return r.a.createElement("div",{key:e.id,className:"historyCard"},r.a.createElement("h3",{className:"noMarginTop"},e.origin," to ",e.destination),r.a.createElement("h4",{className:"noMarginTop"},O(e.outboundDate)," return: ",O(e.inboundDate)))}))),r.a.createElement("div",{className:"middleContainer"},r.a.createElement(b,{handleSubmit:this.handleSubmit,originPlace:this.state.originPlace,handleChange:this.handleChange}),!0===this.state.loading?r.a.createElement("div",{id:"loader"},r.a.createElement("div",{id:"loaderAnimation"}),r.a.createElement("h3",{className:"loadingText"},"Searching..."),T(this.state)):r.a.createElement(y,{price:this.state.price,itineraries:this.state.itineraries,flightsData:this.state.flightsData,flightsParams:this.state.flightsParams})),r.a.createElement("div",{className:"sideContainers forecastWheather"},r.a.createElement("div",{className:"sideImage wheatherImage"}),r.a.createElement("div",null,this.state.wheatherorigin.map((function(t){return"undefined"===typeof t?r.a.createElement("h3",null,"Can't display wheather. But doesn't matter because the weather is unpredictable."):r.a.createElement("div",{key:(t.dt*Math.random()).toString(),className:"wheathCard"},e.state.cities.map((function(e){return r.a.createElement("h2",{className:"noMarginTop",key:(e.id*Math.random()).toString()},e.origin)})),e.state.cities.map((function(t){return r.a.createElement("h4",{key:e.state.cities[0].id,className:"noMarginTop"},O(t.outboundDate))})),r.a.createElement("h4",{className:"noMarginTop"},"Temp max: ",Math.round(t.temp.max)," \u2103"),r.a.createElement("h4",{className:"noMarginTop"},"Temp min: ",Math.round(t.temp.min)," \u2103"),r.a.createElement("h4",{className:"noMarginTop capitalizes"},t.weather[0].description))})),this.state.wheatherdestination.map((function(t){return"undefined"===typeof t?r.a.createElement("h3",null,"Can't display wheather. But doesn't matter because the weather is unpredictable."):r.a.createElement("div",{key:(t.dt*Math.random()).toString(),className:"wheathCard"},e.state.cities.map((function(e){return r.a.createElement("h2",{className:"noMarginTop",key:(e.id*Math.random()).toString()},e.destination)})),e.state.cities.map((function(t){return r.a.createElement("h4",{key:e.state.cities[0].id.toString(),className:"noMarginTop"},O(t.outboundDate))})),r.a.createElement("h4",{className:"noMarginTop"},"Temp max: ",Math.round(t.temp.max)," \u2103"),r.a.createElement("h4",{className:"noMarginTop"},"Temp min: ",Math.round(t.temp.min)," \u2103"),r.a.createElement("h4",{className:"noMarginTop capitalizes"},t.weather[0].description))})),r.a.createElement("div",{className:"contact"},r.a.createElement("h3",null,"Contact:"),r.a.createElement("h4",null,"cristi_sita@yahoo.com"),r.a.createElement("a",{className:"anchorBtn gitLink",target:"_blank",rel:"noopener noreferrer",href:"https://github.com/Cristi-Sita/Portofolio"},"GitHub"))))))}}]),t}(n.Component),S=function(e,t){new Date(e);return t.find((function(e){var t=1e3*e.dt;new Date(t);return e}))},P=function(e){return e.slice(0,1)},j=function(e){var t=e[0].PricingOptions;if(0===e.length)return alert("Something is wrong! Verify if destination is type corectly! If yes try again.");if(1===e.length)return e[0].PricingOptions;for(var a=1;a<e.length;a++)t=t.concat(e[a].PricingOptions);return t},O=function(e){return E()(e).format("ll")},T=function(e){if(!0===e.loadingPlus)return r.a.createElement("h3",{className:"loadingTextPlus"},"...almost there")},k=function(e){return!0===e.loading?r.a.createElement("img",{className:"bkgImage",src:a(23)("./".concat(C[Math.floor(C.length*Math.random())])),alt:"flying objects",style:{opacity:.7}}):r.a.createElement("img",{className:"bkgImage",src:a(23)("./".concat(C[Math.floor(C.length*Math.random())])),alt:"flying objects",style:{opacity:.2}})},M=D;s.a.render(r.a.createElement(M,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.e9093137.chunk.js.map